# å‡ºå¼µç²¾ç®—ã‚·ã‚¹ãƒ†ãƒ  (Travel Expenses Settlement System)

ç¤¾å†…åˆ©ç”¨ã®å‡ºå¼µç²¾ç®—Webã‚·ã‚¹ãƒ†ãƒ 

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **Frontend**: React + TypeScript + TailwindCSS + Vite
- **Backend**: Node.js + Express + TypeScript
- **Database**: PostgreSQL
- **Development**: Docker + Docker Compose
- **Package Manager**: pnpm

## é–‹ç™ºç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Docker & Docker Compose
- Node.js 18ä»¥ä¸Š
- pnpm 8ä»¥ä¸Š

### ç’°å¢ƒæ§‹ç¯‰

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³**
   ```bash
   git clone <repository-url>
   cd travel-expenses-settlement
   ```

2. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
   ```bash
   cp .env.example .env
   ```

3. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**
   ```bash
   pnpm install
   ```

4. **Dockerç’°å¢ƒã®èµ·å‹•**
   ```bash
   docker-compose up -d
   ```

### é–‹ç™ºç”¨ã‚³ãƒãƒ³ãƒ‰

```bash
# é–‹ç™ºç’°å¢ƒã®èµ·å‹•
docker-compose up -d

# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•ï¼ˆãƒ­ãƒ¼ã‚«ãƒ«ï¼‰
pnpm run dev

# ãƒ“ãƒ«ãƒ‰
pnpm run build

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
pnpm run test

# ãƒªãƒ³ãƒˆ
pnpm run lint

# å‹ãƒã‚§ãƒƒã‚¯
pnpm run typecheck

# ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
pnpm run format

# ç’°å¢ƒå¤‰æ•°ã®æ¤œè¨¼
pnpm run validate:env

# æœ¬ç•ªç”¨Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ã®ãƒ“ãƒ«ãƒ‰
pnpm run build:docker
```

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹æˆ

```
travel-expenses-settlement/
â”œâ”€â”€ docker/                    # Dockerè¨­å®š
â”‚   â”œâ”€â”€ postgres/
â”‚   â”œâ”€â”€ nginx/
â”‚   â””â”€â”€ node/
â”œâ”€â”€ packages/
â”‚   â”œâ”€â”€ backend/               # ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰
â”‚   â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”‚   â”œâ”€â”€ config/
â”‚   â”‚   â”‚   â”œâ”€â”€ controllers/
â”‚   â”‚   â”‚   â”œâ”€â”€ middleware/
â”‚   â”‚   â”‚   â”œâ”€â”€ models/
â”‚   â”‚   â”‚   â”œâ”€â”€ routes/
â”‚   â”‚   â”‚   â”œâ”€â”€ services/
â”‚   â”‚   â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â”‚   â””â”€â”€ utils/
â”‚   â”‚   â””â”€â”€ package.json
â”‚   â””â”€â”€ frontend/              # ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
â”‚       â”œâ”€â”€ src/
â”‚       â”‚   â”œâ”€â”€ components/
â”‚       â”‚   â”œâ”€â”€ pages/
â”‚       â”‚   â”œâ”€â”€ services/
â”‚       â”‚   â”œâ”€â”€ hooks/
â”‚       â”‚   â”œâ”€â”€ utils/
â”‚       â”‚   â”œâ”€â”€ types/
â”‚       â”‚   â””â”€â”€ styles/
â”‚       â””â”€â”€ package.json
â”œâ”€â”€ .github/
â”‚   â””â”€â”€ workflows/              # CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
â”œâ”€â”€ docs/                       # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
â”‚   â”œâ”€â”€ API.md                  # APIä»•æ§˜æ›¸
â”‚   â”œâ”€â”€ DEPLOYMENT.md           # ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰
â”‚   â””â”€â”€ CONTRIBUTING.md         # ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰
â”œâ”€â”€ scripts/                    # ãƒ“ãƒ«ãƒ‰ãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ package.json
â””â”€â”€ pnpm-workspace.yaml
```

## ã‚¢ã‚¯ã‚»ã‚¹å…ˆ

- **Frontend**: http://localhost:3000
- **Backend API**: http://localhost:5000
- **Nginx Proxy**: http://localhost:80
- **Database**: localhost:5432

## API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ

### ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
- `GET /api/health` - ã‚·ã‚¹ãƒ†ãƒ ã®ç¨¼åƒçŠ¶æ³ç¢ºèª

### èªè¨¼
- `POST /api/auth/login` - ãƒ­ã‚°ã‚¤ãƒ³
- `POST /api/auth/logout` - ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
- `GET /api/auth/me` - ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±

### ç²¾ç®—ç”³è«‹
- `GET /api/expense-reports` - ç²¾ç®—ç”³è«‹ä¸€è¦§
- `POST /api/expense-reports` - ç²¾ç®—ç”³è«‹ä½œæˆ
- `GET /api/expense-reports/:id` - ç²¾ç®—ç”³è«‹è©³ç´°
- `PUT /api/expense-reports/:id` - ç²¾ç®—ç”³è«‹æ›´æ–°
- `DELETE /api/expense-reports/:id` - ç²¾ç®—ç”³è«‹å‰Šé™¤

## é–‹ç™ºã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹

### ãƒ•ã‚§ãƒ¼ã‚º1: åŸºç›¤æ§‹ç¯‰ âœ…
- [x] Dockerç’°å¢ƒã®æ§‹ç¯‰
- [x] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸè¨­å®š
- [x] TypeScriptè¨­å®š
- [x] ESLint/Prettierè¨­å®š
- [x] åŸºæœ¬çš„ãªãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ 

### ãƒ•ã‚§ãƒ¼ã‚º2: èªè¨¼æ©Ÿèƒ½ ğŸš§
- [ ] ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼API
- [ ] JWTå®Ÿè£…
- [ ] ãƒ­ã‚°ã‚¤ãƒ³ç”»é¢
- [ ] èªè¨¼ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

### ãƒ•ã‚§ãƒ¼ã‚º3: ç²¾ç®—ç”³è«‹æ©Ÿèƒ½ ğŸš§
- [ ] ç²¾ç®—ç”³è«‹API
- [ ] ç²¾ç®—ç”³è«‹ç”»é¢
- [ ] ç”³è«‹ä¸€è¦§ç”»é¢
- [ ] ç”³è«‹è©³ç´°ç”»é¢

### ãƒ•ã‚§ãƒ¼ã‚º4: æ‰¿èªæ©Ÿèƒ½ ğŸš§
- [ ] æ‰¿èªAPI
- [ ] æ‰¿èªç”»é¢
- [ ] æ‰¿èªå±¥æ­´
- [ ] é€šçŸ¥æ©Ÿèƒ½

### ãƒ•ã‚§ãƒ¼ã‚º5: ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆæº–å‚™ âœ…
- [x] ç’°å¢ƒå¤‰æ•°ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- [x] æœ¬ç•ªç”¨Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆãƒãƒ«ãƒã‚¹ãƒ†ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰ï¼‰
- [x] CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ï¼ˆGitHub Actionsï¼‰
- [x] ãƒ“ãƒ«ãƒ‰æœ€é©åŒ–è¨­å®š
- [x] APIä»•æ§˜æ›¸
- [x] ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰
- [x] ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### Dockeré–¢é€£
- ã‚³ãƒ³ãƒ†ãƒŠãŒèµ·å‹•ã—ãªã„å ´åˆ: `docker compose down -v && docker compose up -d`
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šã‚¨ãƒ©ãƒ¼: `.env`ãƒ•ã‚¡ã‚¤ãƒ«ã®è¨­å®šã‚’ç¢ºèª

### ä¾å­˜é–¢ä¿‚é–¢é€£
- ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã‚¨ãƒ©ãƒ¼: `pnpm install --force`
- å‹ã‚¨ãƒ©ãƒ¼: `pnpm run typecheck`ã§è©³ç´°ç¢ºèª

### ã‚µãƒ³ãƒ—ãƒ«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
  - **Admin**: admin@example.com / password123
  - **Employee**: employee1@example.com / password123

## ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **[APIä»•æ§˜æ›¸](docs/API.md)** - REST APIã®è©³ç´°ä»•æ§˜
- **[ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆã‚¬ã‚¤ãƒ‰](docs/DEPLOYMENT.md)** - æœ¬ç•ªç’°å¢ƒã¸ã®é…ç½®æ‰‹é †
- **[ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](docs/CONTRIBUTING.md)** - é–‹ç™ºå‚åŠ ã‚¬ã‚¤ãƒ‰ãƒ©ã‚¤ãƒ³

## æœ¬ç•ªç’°å¢ƒã¸ã®å±•é–‹

### ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
```bash
# ç’°å¢ƒå›ºæœ‰ã®è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
cp .env.example .env.production

# æœ¬ç•ªç’°å¢ƒç”¨ã®å€¤ã‚’è¨­å®š
# - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šæƒ…å ±
# - JWT ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆï¼ˆ32æ–‡å­—ä»¥ä¸Šï¼‰
# - API URL
```

### ãƒ“ãƒ«ãƒ‰ã¨ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# ç’°å¢ƒå¤‰æ•°ã®æ¤œè¨¼
pnpm run validate:env

# æœ¬ç•ªç”¨ãƒ“ãƒ«ãƒ‰ã®å®Ÿè¡Œ
./scripts/build.sh --docker

# æœ¬ç•ªç’°å¢ƒã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤ï¼ˆè©³ç´°ã¯ãƒ‡ãƒ—ãƒ­ã‚¤ã‚¬ã‚¤ãƒ‰ã‚’å‚ç…§ï¼‰
docker-compose -f docker/docker-compose.prod.yml up -d
```

### CI/CD ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
GitHub Actionsã‚’ä½¿ç”¨ã—ãŸè‡ªå‹•åŒ–ï¼š
- **ã‚³ãƒ¼ãƒ‰å“è³ªãƒã‚§ãƒƒã‚¯**: lintã€å‹ãƒã‚§ãƒƒã‚¯ã€ãƒ†ã‚¹ãƒˆ
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³**: è„†å¼±æ€§æ¤œå‡º
- **Dockerã‚¤ãƒ¡ãƒ¼ã‚¸ãƒ“ãƒ«ãƒ‰**: æœ¬ç•ªç”¨ã‚¤ãƒ¡ãƒ¼ã‚¸ã®ä½œæˆ
- **è‡ªå‹•ãƒ‡ãƒ—ãƒ­ã‚¤**: æ‰¿èªå¾Œã®è‡ªå‹•é…ç½®